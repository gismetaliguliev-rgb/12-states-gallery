# Карта Зависимостей — KIS-GALLERY

Визуальная карта связей между всеми частями системы.

---

## Общая Схема

```
┌─────────────────────────────────────────────────────────────────┐
│                         KIS-GALLERY                             │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│   ╔═══════════════════════════════════════════════════════╗    │
│   ║                    ABC (Фундамент)                     ║    │
│   ╠═══════════════════════════════════════════════════════╣    │
│   ║                                                        ║    │
│   ║   ┌──────────┐    ┌──────────┐    ┌──────────┐        ║    │
│   ║   │ A-AGENTS │◄───│ C-CORE   │───►│ B-BRAIN  │        ║    │
│   ║   │          │    │  (Ядро)  │    │  (Мозг)  │        ║    │
│   ║   │ Кто      │    │          │    │          │        ║    │
│   ║   │ делает   │    │ Что мы   │    │ Что мы   │        ║    │
│   ║   │          │    │ строим   │    │ знаем    │        ║    │
│   ║   └────┬─────┘    └────┬─────┘    └────┬─────┘        ║    │
│   ║        │               │               │               ║    │
│   ╚════════╪═══════════════╪═══════════════╪═══════════════╝    │
│            │               │               │                    │
│            ▼               ▼               ▼                    │
│   ╔═══════════════════════════════════════════════════════╗    │
│   ║                   TOM (Исполнение)                     ║    │
│   ╠═══════════════════════════════════════════════════════╣    │
│   ║                                                        ║    │
│   ║   ┌──────────┐    ┌──────────┐    ┌──────────┐        ║    │
│   ║   │ T-TOOLS  │───►│ O-OUTPUT │───►│ M-MEMORY │        ║    │
│   ║   │          │    │          │    │          │        ║    │
│   ║   │ Как      │    │ Что      │    │ Что      │        ║    │
│   ║   │ делаем   │    │ создали  │    │ запомнили│        ║    │
│   ║   └──────────┘    └──────────┘    └────┬─────┘        ║    │
│   ║                                        │               ║    │
│   ╚════════════════════════════════════════╪═══════════════╝    │
│                                            │                    │
│                                            ▼                    │
│                                   ┌──────────────┐              │
│                                   │ Следующая    │              │
│                                   │ итерация     │──────────────┼──►
│                                   └──────────────┘              │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## Детальные Зависимости

### C-CORE (Ядро) — Центр Всего

```
                    C-CORE
                      │
        ┌─────────────┼─────────────┐
        │             │             │
        ▼             ▼             ▼
   ┌─────────┐  ┌─────────┐  ┌─────────┐
   │A-AGENTS │  │ T-TOOLS │  │O-OUTPUT │
   │         │  │         │  │         │
   │Читают   │  │Строятся │  │Проверяют│
   │требова- │  │по спекам│  │соответ- │
   │ния      │  │         │  │ствие    │
   └─────────┘  └─────────┘  └─────────┘

C-core/project-brief.md определяет:
  → Что делают агенты
  → Какие инструменты нужны
  → Критерии готовности результата

C-core/tech-spec.md определяет:
  → Архитектуру кода
  → Стандарты качества
  → Технические ограничения
```

### A-AGENTS (Агенты) — Исполнители

```
   ┌─────────────────────────────────────────┐
   │              A-AGENTS                    │
   ├─────────────────────────────────────────┤
   │                                          │
   │  developer ──┐                           │
   │              │                           │
   │  content ────┼──► Используют:            │
   │              │    • C-core (контекст)    │
   │  reviewer ───┘    • B-brain (знания)     │
   │                   • T-tools (инструменты)│
   │                   • M-memory (опыт)      │
   │                                          │
   │              Создают:                    │
   │              • O-output (результаты)     │
   │              • Обновления M-memory       │
   └─────────────────────────────────────────┘
```

### B-BRAIN (Мозг) — Источник Знаний

```
   ┌─────────────────────────────────────────┐
   │              B-BRAIN                     │
   ├─────────────────────────────────────────┤
   │                                          │
   │  references/ ──► Примеры для агентов     │
   │                                          │
   │  research/   ──► Данные для решений      │
   │                                          │
   │  notes/      ──► Идеи для будущего       │
   │                                          │
   │  Питает:                                 │
   │  • A-agents (как делать)                 │
   │  • M-memory/decisions (обоснования)      │
   │  • T-tools (что использовать)            │
   └─────────────────────────────────────────┘
```

### T-TOOLS (Инструменты) — Методы Работы

```
   ┌─────────────────────────────────────────┐
   │              T-TOOLS                     │
   ├─────────────────────────────────────────┤
   │                                          │
   │  components/ ──► Готовые куски кода      │
   │       │                                  │
   │       └──► Используются developer-agent  │
   │                                          │
   │  workflows/  ──► Пошаговые процессы      │
   │       │                                  │
   │       └──► Используются всеми агентами   │
   │                                          │
   │  Пополняется из:                         │
   │  • O-output (проверенные решения)        │
   │  • M-memory/learning-log (best practices)│
   └─────────────────────────────────────────┘
```

### O-OUTPUT (Выход) — Результаты

```
   ┌─────────────────────────────────────────┐
   │              O-OUTPUT                    │
   ├─────────────────────────────────────────┤
   │                                          │
   │  [task-folder]/                          │
   │       │                                  │
   │       ├──► draft.* (черновик)            │
   │       │                                  │
   │       ├──► review.md (результат ревью)   │
   │       │                                  │
   │       └──► final.* (финальная версия)    │
   │                                          │
   │  После одобрения:                        │
   │  • Код → src/                            │
   │  • Конфиги → public/                     │
   │  • Компоненты → T-tools/components/      │
   │  • Процессы → T-tools/workflows/         │
   └─────────────────────────────────────────┘
```

### M-MEMORY (Память) — Обучение Системы

```
   ┌─────────────────────────────────────────┐
   │              M-MEMORY                    │
   ├─────────────────────────────────────────┤
   │                                          │
   │  learning-log.md                         │
   │       │                                  │
   │       ├──► Читается ПЕРЕД каждой задачей │
   │       └──► Пишется ПОСЛЕ каждой задачи   │
   │                                          │
   │  decisions.md                            │
   │       │                                  │
   │       ├──► Читается при похожих задачах  │
   │       └──► Пишется при важных решениях   │
   │                                          │
   │  feedback.md                             │
   │       │                                  │
   │       ├──► Читается при улучшениях       │
   │       └──► Пишется при получении фидбека │
   │                                          │
   │  Влияет на:                              │
   │  • Будущие решения                       │
   │  • Приоритеты задач                      │
   │  • Улучшение агентов                     │
   └─────────────────────────────────────────┘
```

---

## Цикл Жизни Задачи

```
          ┌─────────────────────────────────────────────────────┐
          │                                                     │
          ▼                                                     │
    ┌──────────┐                                                │
    │  ЗАДАЧА  │                                                │
    └────┬─────┘                                                │
         │                                                      │
         ▼                                                      │
    ┌──────────┐     ┌──────────┐     ┌──────────┐             │
    │  C-CORE  │────►│ M-MEMORY │────►│  B-BRAIN │             │
    │ контекст │     │   опыт   │     │  знания  │             │
    └────┬─────┘     └──────────┘     └────┬─────┘             │
         │                                  │                   │
         └──────────────┬──────────────────┘                   │
                        │                                       │
                        ▼                                       │
                  ┌──────────┐                                  │
                  │ A-AGENTS │                                  │
                  │  выбор   │                                  │
                  └────┬─────┘                                  │
                       │                                        │
                       ▼                                        │
                  ┌──────────┐                                  │
                  │ T-TOOLS  │                                  │
                  │ методы   │                                  │
                  └────┬─────┘                                  │
                       │                                        │
                       ▼                                        │
                  ┌──────────┐                                  │
                  │ O-OUTPUT │                                  │
                  │результат │                                  │
                  └────┬─────┘                                  │
                       │                                        │
                       ▼                                        │
                  ┌──────────┐                                  │
                  │ M-MEMORY │                                  │
                  │ запись   │──────────────────────────────────┘
                  └──────────┘
                       │
                       ▼
                  ┌──────────┐
                  │   ГОТОВО │
                  └──────────┘
```

---

## Файлы и Их Связи

```
CLAUDE.md
    │
    ├──► SYSTEM-LOGIC.md (подробная логика)
    │
    └──► При старте читает:
              │
              ├──► C-core/project-brief.md
              ├──► C-core/tech-spec.md
              ├──► M-memory/learning-log.md
              ├──► M-memory/decisions.md
              └──► M-memory/feedback.md

A-agents/developer-agent.md
    │
    └──► При активации читает:
              │
              ├──► C-core/* (что строить)
              ├──► T-tools/components/* (готовый код)
              ├──► M-memory/learning-log.md (опыт)
              └──► B-brain/references/* (примеры)

A-agents/content-agent.md
    │
    └──► При активации читает:
              │
              ├──► C-core/project-brief.md (стиль)
              ├──► T-tools/workflows/* (процессы)
              └──► public/gallery-config.json (текущее состояние)

A-agents/reviewer-agent.md
    │
    └──► При активации читает:
              │
              ├──► C-core/tech-spec.md (стандарты)
              ├──► M-memory/decisions.md (обоснования)
              └──► O-output/* (что проверять)
```

---

## Триггеры Обновления Памяти

| Событие | Файл для обновления |
|---------|---------------------|
| Узнали что-то новое | M-memory/learning-log.md |
| Приняли важное решение | M-memory/decisions.md |
| Получили фидбек от пользователя | M-memory/feedback.md |
| Создали переиспользуемый код | T-tools/components/ |
| Создали новый процесс | T-tools/workflows/ |
| Нашли полезный референс | B-brain/references/ |

---

*Эта карта помогает понять как все части системы связаны между собой.*
